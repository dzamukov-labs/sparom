# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Google Sheets

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –°–æ–∑–¥–∞–Ω API endpoint `/api/prices.js` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω –∏–∑ Google Sheets
2. ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `configurator.js` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω –Ω–∞ 5 –º–∏–Ω—É—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ —Ü–µ–Ω—ã, –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Vercel

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ JSON-–∫–ª—é—á –æ—Ç Service Account

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å service account: `docs-api-access-sparom@sparom-450109.iam.gserviceaccount.com`

–ù–∞–π–¥–∏—Ç–µ JSON-—Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏ –æ—Ç —ç—Ç–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞. –û–Ω –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```json
{
  "type": "service_account",
  "project_id": "sparom-450109",
  "private_key_id": "...",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
  "client_email": "docs-api-access-sparom@sparom-450109.iam.gserviceaccount.com",
  "client_id": "...",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  ...
}
```

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Vercel:
`Settings ‚Üí Environment Variables`

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

1. **GOOGLE_SERVICE_ACCOUNT_EMAIL**
   - Value: `docs-api-access-sparom@sparom-450109.iam.gserviceaccount.com`

2. **GOOGLE_PRIVATE_KEY**
   - Value: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `private_key` –∏–∑ JSON —Ñ–∞–π–ª–∞
   - ‚ö†Ô∏è –í–ê–ñ–ù–û: –ö–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–ª—é—á –≤–º–µ—Å—Ç–µ —Å `-----BEGIN PRIVATE KEY-----` –∏ `-----END PRIVATE KEY-----`

3. **GOOGLE_PROJECT_ID** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - Value: `sparom-450109`

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ service account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É: https://docs.google.com/spreadsheets/d/14e6UAfwxsYUmkkG9r_DxR2psGmpy3r8mAr9N_DSAB9c/edit
2. –ù–∞–∂–º–∏—Ç–µ "Share" (–ü–æ–¥–µ–ª–∏—Ç—å—Å—è)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `docs-api-access-sparom@sparom-450109.iam.gserviceaccount.com` –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ —Å –ø—Ä–∞–≤–∞–º–∏ **Viewer** –∏–ª–∏ **Editor**

### –®–∞–≥ 4: –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∑–∞–¥–µ–ø–ª–æ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
git add .
git commit -m "feat: Add Google Sheets price sync"
git push
```

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–æ–º**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: `Prices loaded from Google Sheets: (fresh)` –∏–ª–∏ `(cached)`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –Ω–∞–ø—Ä—è–º—É—é**
   - –û—Ç–∫—Ä–æ–π—Ç–µ: `https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app/api/prices`
   - –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON —Å —Ü–µ–Ω–∞–º–∏:
   ```json
   {
     "success": true,
     "cached": false,
     "data": {
       "sizes": {
         "2-3x3": { "name": "2,3X3 —Ü–µ–ª–∏–∫–æ–≤–∞—è", "base": 364900, "comfort": 431900, "max": 576000 },
         ...
       }
     }
   }
   ```

3. **–ò–∑–º–µ–Ω–∏—Ç–µ —Ü–µ–Ω—É –≤ —Ç–∞–±–ª–∏—Ü–µ**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ª—é–±—É—é —Ü–µ–Ω—É
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 5 –º–∏–Ω—É—Ç (–≤—Ä–µ–º—è –∫—ç—à–∞)
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É - –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ

–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Å—Ç—Ä–æ–∫–∏ 3-13):

```
–°—Ç—Ä–æ–∫–∞ 3: –ó–∞–≥–æ–ª–æ–≤–∫–∏
| –†–∞–∑–º–µ—Ä –±–∞–Ω–∏          | –ë–∞–∑–æ–≤–∞—è | –ö–æ–º—Ñ–æ—Ä—Ç | –ú–∞–∫—Å–∏–º—É–º |

–°—Ç—Ä–æ–∫–∏ 4-13: –î–∞–Ω–Ω—ã–µ
| 2,3X3 —Ü–µ–ª–∏–∫–æ–≤–∞—è      | 364900  | 431900  | 576000   |
| 2,3X4 —Ü–µ–ª–∏–∫–æ–≤–∞—è      | 397900  | 465900  | 616000   |
| 2,3X5 —Å –∫—Ä—ã–ª–µ—á–∫–æ–º    | 417900  | 490900  | 646000   |
| ...
```

## ‚ö° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- –¶–µ–Ω—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ **5 –º–∏–Ω—É—Ç**
- –ü—Ä–∏ –æ—à–∏–±–∫–µ Google Sheets API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ï—Å–ª–∏ –∫—ç—à –ø—É—Å—Ç –∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ —Ü–µ–Ω—ã –≤ –∫–æ–¥–µ

## üîç Troubleshooting

### –û—à–∏–±–∫–∞: "Server configuration error"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ environment variables –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Vercel
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `GOOGLE_PRIVATE_KEY` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–µ—Å—å –∫–ª—é—á —Å `-----BEGIN` –∏ `-----END`

### –û—à–∏–±–∫–∞: "Failed to fetch prices"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø service account –∫ —Ç–∞–±–ª–∏—Ü–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Google Sheets API –≤–∫–ª—é—á–µ–Ω –≤ Google Cloud –ø—Ä–æ–µ–∫—Ç–µ

### –¶–µ–Ω—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 –º–∏–Ω—É—Ç (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –û—Ç–∫—Ä–æ–π—Ç–µ `/api/prices` –Ω–∞–ø—Ä—è–º—É—é –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç

## üìù –ì–¥–µ –Ω–∞–π—Ç–∏ JSON-–∫–ª—é—á?

–ï—Å–ª–∏ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ JSON-—Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Google Cloud Console: https://console.cloud.google.com/
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `sparom-450109`
3. IAM & Admin ‚Üí Service Accounts
4. –ù–∞–π–¥–∏—Ç–µ `docs-api-access-sparom@sparom-450109.iam.gserviceaccount.com`
5. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ email ‚Üí Keys ‚Üí Add Key ‚Üí Create new key ‚Üí JSON
6. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è environment variables
